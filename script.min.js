var editting=!1;if(!localStorage.getItem("tasks")){var todos=[],todos_storage=todos.toString();localStorage.setItem("tasks",todos_storage)}if(!localStorage.getItem("tag_num")||!localStorage.getItem("tag_num_storage")){localStorage.setItem("tag_num",0);var tag_list=[]}function update_tag(t){localStorage.setItem("tag_num",t),tag=Number(localStorage.getItem("tag_num"))}function check_editting(t,e){return!1===editting?(toggle_form(t),document.querySelectorAll("li").forEach(t=>{t.onmouseover=(()=>{t.style.cursor="unset"})}),!1):e.length<=1?(window.alert("Nenhuma tarefa a ser editada"),editting=!1,!1):(toggle_form(t),void document.querySelectorAll("li").forEach(t=>{t.onmouseover=(()=>{t.style.cursor="pointer"})}))}function toggle_form(t){const e=document.querySelector(`#${t}_task_popup`);switch("block"===e.style.display){case!1:e.style.display="block";break;case!0:e.style.display="none"}}function block_form(t){"edit"===t&&(document.querySelector(`#${t}_task_input`).disabled=!0,document.querySelector(`#${t}_task_input`).style.cursor="not-allowed"),document.querySelector(`#${t}_task_input`).value="",document.querySelector(`#${t}_task_button`).disabled=!0,document.querySelector(`#${t}_task_button`).style.cursor="not-allowed"}function save_tasks(t,e){e++,todos.push(t),todos_storage=todos.toString(),localStorage.setItem("tasks",todos_storage),update_tag(e)}function load_tasks(){todos=localStorage.getItem("tasks").split(","),todos_forof=todos.values(),tag=todos.length;for(const t of todos_forof&&todos)switch(t){case"":break;default:const e=document.createElement("li");e.innerHTML=t,e.setAttribute("id",`li_${todos.indexOf(t)}`),document.querySelector("#task_list").appendChild(e)}}function reset_tasks(){return window.confirm("Tem certeza? Toda a lista será apagada.")&&(task_list.innerHTML=[],todos_storage=(todos=[]).toString(),localStorage.setItem("tasks",todos_storage),tag_list=[],window.location.reload()),!1}window.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("#add_task_input"),e=document.querySelector("#add_task_button"),o=document.querySelector("#edit_task_input"),s=document.querySelector("#edit_task_button"),a=document.querySelector("#task_list");load_tasks(),block_form("edit"),block_form("add"),o.onkeyup=(()=>{s.disabled=!1,s.style.cursor="pointer",0!==o.value.length?(s.disabled=!1,s.style.cursor="pointer"):block_form("edit")}),t.onkeyup=(()=>{e.disabled=!1,e.style.cursor="pointer",0!==t.value.length?(e.disabled=!1,e.style.cursor="pointer"):block_form("add")}),document.querySelectorAll("form").forEach(e=>{e.onsubmit=(()=>{switch(e.id){case"add_task":const o=t.value;if(""==o||!o.replace(/\s/g,"").length)return block_form("add"),window.alert("Tarefas vazias não passarão! (Boa tentativa, mas este é um caso pensado)."),!1;const s=document.createElement("li");return s.innerHTML=o,s.setAttribute("id",`li_${tag}`),a.append(s),block_form("add"),save_tasks(o,tag++),!1}})}),document.querySelectorAll(".toggle_form").forEach(t=>{t.onclick=(()=>{const e=t.dataset.form;switch(e){case"edit":editting=!editting,check_editting(e,todos),document.querySelectorAll("li").forEach(t=>{t.onclick=(()=>{const e=t.id;let a=t.innerText;o.value=a,s.disabled=!1,s.style.cursor="pointer",o.disabled=!1,o.style.cursor="unset",0!==o.value.length?(s.disabled=!1,s.style.cursor="pointer"):block_form("edit"),document.querySelector("#edit_task").onsubmit=(()=>{const t=o.value;return""!=t&&t.replace(/\s/g,"").length?(document.querySelectorAll('input[name="choice"]').forEach(s=>{if(s.checked)switch(s.id){case"del":return document.querySelector(`#${e}`).remove(),o.value="",block_form("edit"),todos.splice(todos.indexOf(a),1),todos_storage=todos.toString(),localStorage.setItem("tasks",todos_storage),!1;case"edit":return document.querySelector(`#${e}`).innerText=t,todos[todos.indexOf(a)]=t,todos_storage=todos.toString(),localStorage.setItem("tasks",todos_storage),!1}}),!1):(block_form("edit"),window.alert("Tarefas vazias não passarão! (Boa tentativa, mas este é um caso pensado)."),!1)})})});break;default:toggle_form(e)}})}),document.querySelector("#clear").onclick=reset_tasks});