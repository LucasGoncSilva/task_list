let editting=!1;if(!localStorage.getItem("tasks")){let t=[].toString();localStorage.setItem("tasks",t)}if(!localStorage.getItem("tag_num")||!localStorage.getItem("tag_num_storage")){localStorage.setItem("tag_num",0);var tag_list=[]}function updateTag(t){localStorage.setItem("tag_num",t),tag=Number(localStorage.getItem("tag_num"))}function checkEditting(t,e){return!1===editting?(toggleForm(t),document.querySelectorAll("li").forEach(t=>{t.onmouseover=(()=>{t.style.cursor="unset"})}),!1):e.length<=1?(Swal.fire({icon:"info",iconColor:"#4717f6",title:"Lista Vazia",html:"<p>Não há tarefa nenhuma na lista para ser editada</p>"}),editting=!1,!1):(toggleForm(t),void document.querySelectorAll("li").forEach(t=>{t.onmouseover=(()=>{t.style.cursor="pointer"})}))}function toggleForm(t){const e=document.getElementById(`${t}_task_popup`);switch(document.querySelectorAll(`.toggle_popup:not(#${t}_task_popup)`).forEach(t=>{t.style.display="none"}),"block"===e.style.display){case!1:e.style.display="block";break;case!0:e.style.display="none"}}function blockForm(t){"edit"===t&&(document.getElementById(`${t}_task_input`).disabled=!0,document.getElementById(`${t}_task_input`).style.cursor="not-allowed"),document.getElementById(`${t}_task_input`).value="",document.getElementById(`${t}_task_button`).disabled=!0,document.getElementById(`${t}_task_button`).style.cursor="not-allowed"}function saveTasks(t,e){e++,todos.push(t),todos_storage=todos.toString(),localStorage.setItem("tasks",todos_storage),updateTag(e)}function loadTasks(){todos=localStorage.getItem("tasks").split(","),todos_forof=todos.values(),tag=todos.length;for(const t of todos_forof&&todos)switch(t){case"":break;default:const e=document.createElement("li");e.innerHTML=t,e.setAttribute("id",`li_${todos.indexOf(t)}`),document.querySelector("#task_list").appendChild(e)}}function resetTasks(){return window.confirm("Tem certeza? Toda a lista será apagada.")&&(task_list.innerHTML=[],todos=[],todos_storage=todos.toString(),localStorage.setItem("tasks",todos_storage),tag_list=[],window.location.reload()),!1}window.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("add_task_input"),e=document.getElementById("add_task_button"),o=document.getElementById("edit_task_input"),a=document.getElementById("edit_task_button"),s=document.getElementById("task_list");loadTasks(),blockForm("edit"),blockForm("add"),o.onkeyup=(()=>{a.disabled=!1,a.style.cursor="pointer",0!==o.value.length?(a.disabled=!1,a.style.cursor="pointer"):blockForm("edit")}),t.onkeyup=(()=>{e.disabled=!1,e.style.cursor="pointer",0!==t.value.length?(e.disabled=!1,e.style.cursor="pointer"):blockForm("add")}),document.getElementById("add_task").onsubmit=(()=>{const e=t.value;if(""==e||!e.replace(/\s/g,"").length)return blockForm("add"),window.alert("Tarefas vazias não passarão! (Boa tentativa, mas este é um caso pensado)."),!1;const o=document.createElement("li");return o.innerHTML=e,o.setAttribute("id",`li_${tag}`),s.append(o),blockForm("add"),saveTasks(e,tag++),!1}),document.querySelectorAll(".toggle_form").forEach(t=>{t.onclick=(()=>{const e=t.dataset.form;switch(e){case"edit":editting=!editting,checkEditting(e,todos),document.querySelectorAll("li").forEach(t=>{t.onclick=(()=>{const e=t.id;let s=t.innerText;o.value=s,a.disabled=!1,a.style.cursor="pointer",o.disabled=!1,o.style.cursor="unset",0!==o.value.length?(a.disabled=!1,a.style.cursor="pointer"):blockForm("edit"),document.querySelector("#edit_task").onsubmit=(()=>{const t=o.value;return""!=t&&t.replace(/\s/g,"").length?(document.querySelectorAll('input[name="choice"]').forEach(a=>{if(a.checked)switch(a.id){case"del":return document.querySelector(`#${e}`).remove(),o.value="",blockForm("edit"),todos.splice(todos.indexOf(s),1),todos_storage=todos.toString(),localStorage.setItem("tasks",todos_storage),!1;case"edit":return document.querySelector(`#${e}`).innerText=t,todos[todos.indexOf(s)]=t,todos_storage=todos.toString(),localStorage.setItem("tasks",todos_storage),!1}}),!1):(blockForm("edit"),window.alert("Tarefas vazias não passarão! (Boa tentativa, mas este é um caso pensado)."),!1)})})});break;default:toggleForm(e)}})}),document.querySelector("#clear").onclick=resetTasks});